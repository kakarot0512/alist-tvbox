# ç™¾åº¦ç½‘ç›˜é…ç½®æŒ‡å—

## ç›®å½•

1. [å‰ç½®å‡†å¤‡](#å‰ç½®å‡†å¤‡)
2. [è·å–å¿…è¦å‚æ•°](#è·å–å¿…è¦å‚æ•°)
3. [é…ç½®ç™¾åº¦ç½‘ç›˜è´¦æˆ·](#é…ç½®ç™¾åº¦ç½‘ç›˜è´¦æˆ·)
4. [é…ç½®ç™¾åº¦ç½‘ç›˜åˆ†äº«](#é…ç½®ç™¾åº¦ç½‘ç›˜åˆ†äº«)
5. [æµ‹è¯•ä¸éªŒè¯](#æµ‹è¯•ä¸éªŒè¯)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
7. [é«˜çº§é…ç½®](#é«˜çº§é…ç½®)

---

## å‰ç½®å‡†å¤‡

### ç¯å¢ƒè¦æ±‚

- AList-TvBoxæœåŠ¡æ­£å¸¸è¿è¡Œ
- æœ‰æ•ˆçš„ç™¾åº¦ç½‘ç›˜è´¦å·
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆç”¨äºè·å–cookieï¼‰

### æ‰€éœ€ä¿¡æ¯

âœ… **è´¦æˆ·æ¨¡å¼**éœ€è¦ï¼š
- cookieï¼ˆåŒ…å«BDUSSå’ŒSTOKENï¼‰
- refresh_tokenï¼ˆå¯é€‰ï¼Œç”¨äºè‡ªåŠ¨åˆ·æ–°ï¼‰

âœ… **åˆ†äº«æ¨¡å¼**éœ€è¦ï¼š
- åˆ†äº«é“¾æ¥çš„surl
- åˆ†äº«å¯†ç ï¼ˆæå–ç ï¼‰

---

## è·å–å¿…è¦å‚æ•°

### æ–¹æ³•ä¸€ï¼šé€šè¿‡æµè§ˆå™¨è·å–cookie

1. **æ‰“å¼€ç™¾åº¦ç½‘ç›˜ç½‘é¡µç‰ˆ**
   ```
   https://pan.baidu.com/
   ```

2. **ç™»å½•ä½ çš„è´¦å·**

3. **æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·**
   - Chrome/Edge: æŒ‰ `F12` æˆ– `Ctrl+Shift+I`
   - Firefox: æŒ‰ `F12`
   - Safari: å¯ç”¨å¼€å‘èœå•åæŒ‰ `Option+Cmd+I`

4. **åˆ‡æ¢åˆ°Networkï¼ˆç½‘ç»œï¼‰æ ‡ç­¾**

5. **åˆ·æ–°é¡µé¢ï¼ˆF5ï¼‰**

6. **æ‰¾åˆ°ä»»æ„è¯·æ±‚**
   - ç‚¹å‡»ä»»æ„ä¸€ä¸ªå¯¹ç™¾åº¦ç½‘ç›˜çš„è¯·æ±‚
   - æ‰¾åˆ° `Request Headers` éƒ¨åˆ†
   - æ‰¾åˆ° `Cookie` å­—æ®µ

7. **å¤åˆ¶Cookieå€¼**
   ```
   Cookie: BDUSS=xxxxxxxx; STOKEN=xxxxxxxx; ...å…¶ä»–...
   ```
   
   é‡ç‚¹å…³æ³¨ï¼š
   - `BDUSS=...` 
   - `STOKEN=...`

8. **æœ€å°åŒ–Cookie**ï¼ˆæ¨èï¼‰
   ```
   BDUSS=ä½ çš„BDUSSå€¼; STOKEN=ä½ çš„STOKENå€¼
   ```

### æ–¹æ³•äºŒï¼šé€šè¿‡æµè§ˆå™¨Cookieç®¡ç†å™¨

1. **æ‰“å¼€Cookieç®¡ç†å™¨**
   - Chrome: `chrome://settings/cookies`
   - Firefox: è®¾ç½® â†’ éšç§ä¸å®‰å…¨ â†’ Cookieå’Œç½‘ç«™æ•°æ®
   - Edge: `edge://settings/siteData`

2. **æœç´¢ç™¾åº¦ç½‘ç›˜**
   ```
   baidu.com
   ```

3. **æ‰¾åˆ°å¹¶å¤åˆ¶ä»¥ä¸‹Cookie**
   - `BDUSS`
   - `STOKEN`

4. **æ‰‹åŠ¨ç»„è£…Cookie**
   ```
   BDUSS=ä½ çš„BDUSSå€¼; STOKEN=ä½ çš„STOKENå€¼
   ```

### è·å–refresh_tokenï¼ˆå¯é€‰ï¼‰

> refresh_tokenç”¨äºè‡ªåŠ¨åˆ·æ–°access_tokenï¼Œæ¨èé…ç½®

#### æ–¹æ³•Aï¼šé€šè¿‡ç™¾åº¦å¼€æ”¾å¹³å°ï¼ˆæ¨èï¼‰

1. è®¿é—®ç™¾åº¦å¼€æ”¾å¹³å°
   ```
   https://openapi.baidu.com/
   ```

2. åˆ›å»ºåº”ç”¨æˆ–ä½¿ç”¨ç°æœ‰åº”ç”¨

3. è·å–æˆæƒç 
   - ä½¿ç”¨OAuth 2.0æµç¨‹
   - è·å–refresh_token

4. ä½¿ç”¨ä»¥ä¸‹APIè·å–
   ```bash
   curl -X POST "https://openapi.baidu.com/oauth/2.0/token" \
     -d "grant_type=authorization_code" \
     -d "code=ä½ çš„æˆæƒç " \
     -d "client_id=ä½ çš„client_id" \
     -d "client_secret=ä½ çš„client_secret" \
     -d "redirect_uri=oob"
   ```

#### æ–¹æ³•Bï¼šä»æŠ“åŒ…è·å–ï¼ˆéœ€è¦æŠ€æœ¯ï¼‰

1. ä½¿ç”¨æŠ“åŒ…å·¥å…·ï¼ˆCharlesã€Fiddlerã€mitmproxyç­‰ï¼‰

2. æ‹¦æˆªç™¾åº¦ç½‘ç›˜å®¢æˆ·ç«¯çš„è¯·æ±‚

3. æ‰¾åˆ°åŒ…å«refresh_tokençš„å“åº”

### è·å–åˆ†äº«é“¾æ¥å‚æ•°

#### è§£æåˆ†äº«é“¾æ¥

**æ ‡å‡†åˆ†äº«é“¾æ¥æ ¼å¼**ï¼š
```
https://pan.baidu.com/s/1abc123xyz
æå–ç : 1234
```

**è§£æç»“æœ**ï¼š
```
surl: 1abc123xyz
pwd: 1234
```

**æ³¨æ„äº‹é¡¹**ï¼š
- surlæ˜¯é“¾æ¥ä¸­ `/s/` åé¢çš„éƒ¨åˆ†
- å¦‚æœé“¾æ¥æ²¡æœ‰æå–ç ï¼Œpwdç•™ç©º
- çŸ­é“¾æ¥éœ€è¦å…ˆè®¿é—®è·å–çœŸå®é“¾æ¥

---

## é…ç½®ç™¾åº¦ç½‘ç›˜è´¦æˆ·

### æ–¹å¼ä¸€ï¼šé€šè¿‡Webç®¡ç†ç•Œé¢

1. **ç™»å½•AList-TvBoxç®¡ç†åå°**
   ```
   http://your-server:4567/admin
   ```

2. **è¿›å…¥"ç½‘ç›˜è´¦æˆ·"ç®¡ç†**
   - å·¦ä¾§èœå• â†’ ç½‘ç›˜è´¦æˆ·

3. **ç‚¹å‡»"æ·»åŠ è´¦æˆ·"**

4. **å¡«å†™é…ç½®ä¿¡æ¯**
   ```
   è´¦æˆ·ç±»å‹: ç™¾åº¦ç½‘ç›˜
   è´¦æˆ·åç§°: æˆ‘çš„ç™¾åº¦ç½‘ç›˜
   Cookie: BDUSS=xxx; STOKEN=xxx
   Token: refresh_tokenå€¼ï¼ˆå¯é€‰ï¼‰
   æ ¹ç›®å½•: / ï¼ˆæˆ–æŒ‡å®šç›®å½•å¦‚ /è§†é¢‘ï¼‰
   å¹¶å‘æ•°: 3 ï¼ˆå»ºè®®å€¼ï¼‰
   ```

5. **ä¿å­˜é…ç½®**

6. **ç­‰å¾…çŠ¶æ€æ›´æ–°**
   - æŸ¥çœ‹è´¦æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸
   - å¦‚æœæ˜¾ç¤ºé”™è¯¯ï¼Œæ£€æŸ¥cookieæ˜¯å¦æœ‰æ•ˆ

### æ–¹å¼äºŒï¼šé€šè¿‡APIæ¥å£

```bash
curl -X POST "http://your-server:4567/api/driver-accounts" \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer your-token" \
  -d '{
    "type": "BAIDU",
    "name": "æˆ‘çš„ç™¾åº¦ç½‘ç›˜",
    "cookie": "BDUSS=xxx; STOKEN=xxx",
    "token": "refresh_token_value",
    "folder": "/",
    "concurrency": 3,
    "addition": ""
  }'
```

### æ–¹å¼ä¸‰ï¼šé€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆå¼€å‘ç¯å¢ƒï¼‰

ç›´æ¥åœ¨æ•°æ®åº“ä¸­æ’å…¥é…ç½®ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š

```sql
INSERT INTO driver_account (type, name, cookie, token, folder, concurrency, master)
VALUES (
  'BAIDU',
  'æˆ‘çš„ç™¾åº¦ç½‘ç›˜',
  'BDUSS=xxx; STOKEN=xxx',
  'refresh_token_value',
  '/',
  3,
  true
);
```

---

## é…ç½®ç™¾åº¦ç½‘ç›˜åˆ†äº«

### æ–¹å¼ä¸€ï¼šé€šè¿‡Webç®¡ç†ç•Œé¢

1. **è¿›å…¥"åˆ†äº«ç®¡ç†"**
   - å·¦ä¾§èœå• â†’ åˆ†äº«ç®¡ç†

2. **ç‚¹å‡»"æ·»åŠ åˆ†äº«"**

3. **å¡«å†™é…ç½®**
   ```
   åˆ†äº«ç±»å‹: ç™¾åº¦ç½‘ç›˜åˆ†äº«
   æ˜¾ç¤ºè·¯å¾„: æˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µå½±
   åˆ†äº«ID: 1abc123xyz
   æå–ç : 1234
   æ–‡ä»¶å¤¹ID: / æˆ– root ï¼ˆç•™ç©ºè¡¨ç¤ºæ ¹ç›®å½•ï¼‰
   ```

4. **ä¿å­˜å¹¶æµ‹è¯•**

### æ–¹å¼äºŒï¼šæ‰¹é‡å¯¼å…¥

1. **å‡†å¤‡å¯¼å…¥æ–‡ä»¶**
   
   åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ `baidu_shares.txt`:
   ```
   æˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µå½±  10:1abc123xyz  root  1234
   æˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µè§†å‰§  10:1def456uvw  root  5678
   æˆ‘çš„ç™¾åº¦åˆ†äº«/çºªå½•ç‰‡  10:1ghi789rst  /çºªå½•ç‰‡  9012
   ```
   
   æ ¼å¼è¯´æ˜ï¼š
   ```
   æ˜¾ç¤ºè·¯å¾„  ç±»å‹:åˆ†äº«ID  æ–‡ä»¶å¤¹è·¯å¾„  æå–ç 
   ```
   - ç±»å‹: 10 è¡¨ç¤ºç™¾åº¦ç½‘ç›˜åˆ†äº«
   - å­—æ®µä¹‹é—´ç”¨ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦åˆ†éš”

2. **é€šè¿‡ç•Œé¢å¯¼å…¥**
   - è¿›å…¥åˆ†äº«ç®¡ç†
   - ç‚¹å‡»"å¯¼å…¥"
   - ç²˜è´´å†…å®¹æˆ–ä¸Šä¼ æ–‡ä»¶
   - ç¡®è®¤å¯¼å…¥

3. **é€šè¿‡APIå¯¼å…¥**
   ```bash
   curl -X POST "http://your-server:4567/api/shares/import" \
     -H "Content-Type: application/json" \
     -H "Authorization: Bearer your-token" \
     -d '{
       "type": 10,
       "content": "æˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µå½±  10:1abc123xyz  root  1234\næˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µè§†å‰§  10:1def456uvw  root  5678"
     }'
   ```

---

## æµ‹è¯•ä¸éªŒè¯

### 1. éªŒè¯å­˜å‚¨æŒ‚è½½

**é€šè¿‡AListç•Œé¢éªŒè¯**ï¼š

1. è®¿é—®AListç•Œé¢
   ```
   http://your-server:5244
   ```

2. æŸ¥çœ‹æ˜¯å¦å‡ºç°ç™¾åº¦ç½‘ç›˜ç›®å½•
   ```
   /æˆ‘çš„ç™¾åº¦ç½‘ç›˜/æˆ‘çš„ç™¾åº¦ç½‘ç›˜
   /æˆ‘çš„ç™¾åº¦åˆ†äº«/ç”µå½±
   ```

3. å°è¯•æµè§ˆæ–‡ä»¶
   - ç‚¹å‡»è¿›å…¥ç›®å½•
   - æŸ¥çœ‹æ˜¯å¦èƒ½æ­£å¸¸åˆ—å‡ºæ–‡ä»¶
   - æ£€æŸ¥æ˜¯å¦èƒ½çœ‹åˆ°æ–‡ä»¶å¤§å°å’Œä¿®æ”¹æ—¶é—´

### 2. æµ‹è¯•æ’­æ”¾åŠŸèƒ½

**æ–¹æ³•Aï¼šé€šè¿‡TvBoxæµ‹è¯•**

1. åœ¨TvBoxä¸­æ·»åŠ æ•°æ®æº
   ```
   http://your-server:4567/tvbox/my.json
   ```

2. åˆ·æ–°é…ç½®

3. è¿›å…¥"æˆ‘çš„ç™¾åº¦ç½‘ç›˜"åˆ†ç±»

4. é€‰æ‹©ä¸€ä¸ªè§†é¢‘æ–‡ä»¶æ’­æ”¾

5. è§‚å¯Ÿæ˜¯å¦èƒ½æ­£å¸¸æ’­æ”¾

**æ–¹æ³•Bï¼šé€šè¿‡APIæµ‹è¯•**

```bash
# 1. è·å–æ–‡ä»¶åˆ—è¡¨
curl "http://your-server:4567/api/list?site=1&path=/æˆ‘çš„ç™¾åº¦ç½‘ç›˜"

# 2. è·å–æ’­æ”¾åœ°å€
curl "http://your-server:4567/api/play?site=1&path=/æˆ‘çš„ç™¾åº¦ç½‘ç›˜/è§†é¢‘.mp4"
```

é¢„æœŸå“åº”ï¼š
```json
{
  "url": "https://d.pcs.baidu.com/file/...",
  "header": {
    "User-Agent": "netdisk"
  },
  "parse": 0,
  "subs": []
}
```

### 3. éªŒè¯æ—¥å¿—

æŸ¥çœ‹æ—¥å¿—ç¡®è®¤æ²¡æœ‰é”™è¯¯ï¼š

```bash
# æŸ¥çœ‹AList-TvBoxæ—¥å¿—
tail -f /path/to/alist-tvbox.log | grep -i baidu

# æˆ–é€šè¿‡Docker
docker logs -f alist-tvbox | grep -i baidu
```

æ­£å¸¸æ—¥å¿—ç¤ºä¾‹ï¼š
```
[INFO] load playlist 1:localhost /æˆ‘çš„ç™¾åº¦ç½‘ç›˜/ç”µå½±
[DEBUG] [BaiduNetdisk] getPlayUrl result: {url=https://d.pcs.baidu.com/...}
```

---

## å¸¸è§é—®é¢˜

### Q1: é…ç½®åçœ‹ä¸åˆ°æ–‡ä»¶

**å¯èƒ½åŸå› **ï¼š
1. Cookieå·²è¿‡æœŸ
2. refresh_tokenæ— æ•ˆ
3. ç½‘ç»œè¿æ¥é—®é¢˜
4. AListæœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. æ£€æŸ¥AListæœåŠ¡çŠ¶æ€
curl http://localhost:5244/ping

# 2. é‡æ–°è·å–cookie
# æŒ‰ç…§"è·å–å¿…è¦å‚æ•°"éƒ¨åˆ†æ“ä½œ

# 3. æ›´æ–°é…ç½®
# é€šè¿‡ç®¡ç†ç•Œé¢é‡æ–°ä¿å­˜é…ç½®

# 4. é‡å¯æœåŠ¡
docker restart alist-tvbox
# æˆ–
systemctl restart alist-tvbox
```

### Q2: æ’­æ”¾å¤±è´¥æˆ–å¡é¡¿

**å¯èƒ½åŸå› **ï¼š
1. ç½‘ç»œé€Ÿåº¦æ…¢
2. ç™¾åº¦é™é€Ÿï¼ˆéVIPç”¨æˆ·ï¼‰
3. User-Agentæœªæ­£ç¡®è®¾ç½®

**è§£å†³æ–¹æ³•**ï¼š

1. **æ£€æŸ¥é…ç½®**
   ```bash
   # ç¡®è®¤User-Agentè®¾ç½®
   curl -v "http://your-server:4567/api/play?site=1&path=/è§†é¢‘.mp4" | grep -i user-agent
   # åº”è¯¥çœ‹åˆ°: User-Agent: netdisk
   ```

2. **å¯ç”¨ä»£ç†æ¨¡å¼**
   - è¿›å…¥è´¦æˆ·è®¾ç½®
   - å‹¾é€‰"ä½¿ç”¨ä»£ç†"
   - ä¿å­˜é…ç½®

3. **å‡çº§ç™¾åº¦ç½‘ç›˜VIP**
   - éVIPç”¨æˆ·ä¼šè¢«é™é€Ÿ
   - å»ºè®®å‡çº§VIPä»¥è·å¾—æ›´å¥½ä½“éªŒ

### Q3: æç¤º"æ‰¾ä¸åˆ°æ–‡ä»¶"

**å¯èƒ½åŸå› **ï¼š
1. åˆ†äº«é“¾æ¥å·²å¤±æ•ˆ
2. æå–ç é”™è¯¯
3. æ–‡ä»¶å·²è¢«åˆ é™¤

**è§£å†³æ–¹æ³•**ï¼š
```bash
# 1. éªŒè¯åˆ†äº«é“¾æ¥
# åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åˆ†äº«é“¾æ¥ï¼Œç¡®è®¤æ˜¯å¦èƒ½è®¿é—®

# 2. æ£€æŸ¥é…ç½®
# ç¡®è®¤surlå’Œpwdæ­£ç¡®

# 3. é‡æ–°é…ç½®åˆ†äº«
# å¦‚æœåˆ†äº«å·²å¤±æ•ˆï¼Œéœ€è¦é‡æ–°è·å–åˆ†äº«é“¾æ¥
```

### Q4: Tokenè¿‡æœŸé—®é¢˜

**ç°è±¡**ï¼š
- å¼€å§‹èƒ½æ­£å¸¸ä½¿ç”¨
- ä¸€æ®µæ—¶é—´åæ— æ³•è®¿é—®
- æ—¥å¿—æ˜¾ç¤ºè®¤è¯å¤±è´¥

**è§£å†³æ–¹æ³•**ï¼š

1. **é…ç½®refresh_tokenï¼ˆæ¨èï¼‰**
   - æŒ‰ç…§"è·å–å¿…è¦å‚æ•°"è·å–refresh_token
   - æ›´æ–°è´¦æˆ·é…ç½®
   - AListä¼šè‡ªåŠ¨åˆ·æ–°token

2. **æ‰‹åŠ¨æ›´æ–°cookie**
   ```bash
   # æ¯æ¬¡è¿‡æœŸåæ‰‹åŠ¨æ›´æ–°
   # 1. é‡æ–°è·å–cookie
   # 2. é€šè¿‡APIæˆ–ç•Œé¢æ›´æ–°é…ç½®
   curl -X PUT "http://your-server:4567/api/driver-accounts/1" \
     -H "Content-Type: application/json" \
     -d '{
       "cookie": "æ–°çš„BDUSSå’ŒSTOKEN"
     }'
   ```

3. **è®¾ç½®å®šæ—¶ä»»åŠ¡**
   ```bash
   # crontabç¤ºä¾‹ï¼šæ¯å¤©è‡ªåŠ¨æ›´æ–°cookie
   0 2 * * * /path/to/update-baidu-cookie.sh
   ```

### Q5: åˆ†äº«é“¾æ¥æ— æ³•è®¿é—®

**æ£€æŸ¥æ¸…å•**ï¼š

- [ ] åˆ†äº«é“¾æ¥æ˜¯å¦æ­£ç¡®
- [ ] æå–ç æ˜¯å¦æ­£ç¡®
- [ ] åˆ†äº«æ˜¯å¦å·²è¿‡æœŸ
- [ ] åˆ†äº«æ˜¯å¦è¢«ä¸¾æŠ¥/åˆ é™¤
- [ ] ç½‘ç»œæ˜¯å¦æ­£å¸¸

**è°ƒè¯•å‘½ä»¤**ï¼š
```bash
# æµ‹è¯•åˆ†äº«é“¾æ¥
curl -I "https://pan.baidu.com/s/1abc123xyz?pwd=1234"

# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
tail -f /var/log/alist-tvbox.log | grep -i share
```

---

## é«˜çº§é…ç½®

### 1. è‡ªå®šä¹‰client_idå’Œclient_secret

å¦‚æœä½¿ç”¨è‡ªå·±çš„ç™¾åº¦å¼€æ”¾å¹³å°åº”ç”¨ï¼š

```json
{
  "type": "BAIDU",
  "name": "æˆ‘çš„ç™¾åº¦ç½‘ç›˜",
  "cookie": "BDUSS=xxx; STOKEN=xxx",
  "token": "refresh_token",
  "folder": "/",
  "addition": "{\"client_id\":\"ä½ çš„client_id\",\"client_secret\":\"ä½ çš„client_secret\"}"
}
```

### 2. é…ç½®å¤šä¸ªè´¦æˆ·

æ”¯æŒæ·»åŠ å¤šä¸ªç™¾åº¦ç½‘ç›˜è´¦æˆ·ï¼š

```bash
# è´¦æˆ·1ï¼šä¸ªäººè´¦æˆ·
{
  "name": "ä¸ªäººè´¦æˆ·",
  "cookie": "BDUSS1=xxx; STOKEN1=xxx",
  "master": true
}

# è´¦æˆ·2ï¼šå·¥ä½œè´¦æˆ·
{
  "name": "å·¥ä½œè´¦æˆ·",
  "cookie": "BDUSS2=xxx; STOKEN2=xxx",
  "master": false
}
```

### 3. é…ç½®å¹¶å‘æ•°

æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´ï¼š

```json
{
  "concurrency": 3  // èŒƒå›´: 1-10
}
```

- ä½é€Ÿç½‘ç»œï¼šå»ºè®®1-3
- é«˜é€Ÿç½‘ç»œï¼šå¯è®¾ç½®5-10
- VIPç”¨æˆ·ï¼šå¯é€‚å½“æé«˜

### 4. ä»…åˆ—å‡ºè§†é¢‘æ–‡ä»¶

åœ¨additionä¸­é…ç½®ï¼š

```json
{
  "addition": "{\"only_list_video_file\":true}"
}
```

æ•ˆæœï¼š
- åªæ˜¾ç¤ºè§†é¢‘æ–‡ä»¶
- éšè—å…¶ä»–ç±»å‹æ–‡ä»¶
- æå‡æµè§ˆé€Ÿåº¦

### 5. è‡ªå®šä¹‰æ’åº

```json
{
  "addition": "{\"order_by\":\"time\",\"order_direction\":\"desc\"}"
}
```

æ’åºé€‰é¡¹ï¼š
- `order_by`: nameï¼ˆåç§°ï¼‰ã€sizeï¼ˆå¤§å°ï¼‰ã€timeï¼ˆæ—¶é—´ï¼‰
- `order_direction`: ascï¼ˆå‡åºï¼‰ã€descï¼ˆé™åºï¼‰

### 6. è®¾ç½®æ ¹ç›®å½•

åªæ˜¾ç¤ºæŒ‡å®šç›®å½•çš„å†…å®¹ï¼š

```json
{
  "folder": "/ç”µå½±"  // åªåˆ—å‡º/ç”µå½±ç›®å½•ä¸‹çš„å†…å®¹
}
```

### 7. é…ç½®ä»£ç†è§„åˆ™

```json
{
  "useProxy": true  // å¼ºåˆ¶ä½¿ç”¨AListä»£ç†
}
```

ä½¿ç”¨åœºæ™¯ï¼š
- ç™¾åº¦é™é€Ÿæ—¶
- éœ€è¦ç»Ÿä¸€å‡ºå£IPæ—¶
- æ’­æ”¾ä¸ç¨³å®šæ—¶

### 8. é…ç½®WebDAV

AList-TvBoxæ”¯æŒé€šè¿‡WebDAVè®¿é—®ç™¾åº¦ç½‘ç›˜ï¼š

```
WebDAVåœ°å€: http://your-server:5244/dav
ç”¨æˆ·å: admin
å¯†ç : ä½ çš„AListå¯†ç 
```

åœ¨æ”¯æŒWebDAVçš„æ’­æ”¾å™¨ä¸­æ·»åŠ ï¼š
- Infuse
- nPlayer
- VLC

---

## æœ€ä½³å®è·µ

### 1. å®‰å…¨å»ºè®®

âœ… **æ¨èåšæ³•**ï¼š
- ä½¿ç”¨refresh_tokenè‡ªåŠ¨åˆ·æ–°
- å®šæœŸæ›´æ–°cookie
- ä¸è¦åˆ†äº«cookieç»™ä»–äºº
- ä½¿ç”¨å¼ºå¯†ç ä¿æŠ¤ç®¡ç†ç•Œé¢

âŒ **é¿å…**ï¼š
- åœ¨å…¬å…±ç½‘ç»œè·å–cookie
- ä½¿ç”¨ä»–äººçš„cookie
- æ˜æ–‡å­˜å‚¨æ•æ„Ÿä¿¡æ¯

### 2. æ€§èƒ½ä¼˜åŒ–

1. **åˆç†è®¾ç½®å¹¶å‘æ•°**
   ```json
   {
     "concurrency": 3  // æ ¹æ®ç½‘ç»œæƒ…å†µè°ƒæ•´
   }
   ```

2. **å¯ç”¨ç¼“å­˜**
   ```json
   {
     "cacheExpiration": 30  // ç¼“å­˜30åˆ†é’Ÿ
   }
   ```

3. **ä½¿ç”¨ä»£ç†æ¨¡å¼**
   - å¯¹äºé¢‘ç¹è®¿é—®çš„æ–‡ä»¶
   - å¯ä»¥å‡å°‘ç›´æ¥è¯·æ±‚ç™¾åº¦æœåŠ¡å™¨

### 3. ç›®å½•ç»„ç»‡

æ¨èçš„ç›®å½•ç»“æ„ï¼š

```
/æˆ‘çš„ç™¾åº¦ç½‘ç›˜/
â”œâ”€â”€ ç”µå½±/
â”‚   â”œâ”€â”€ å›½äº§/
â”‚   â”œâ”€â”€ æ¬§ç¾/
â”‚   â””â”€â”€ æ—¥éŸ©/
â”œâ”€â”€ ç”µè§†å‰§/
â”‚   â”œâ”€â”€ å›½äº§å‰§/
â”‚   â”œâ”€â”€ ç¾å‰§/
â”‚   â””â”€â”€ æ—¥å‰§/
â””â”€â”€ çºªå½•ç‰‡/
```

åœ¨AList-TvBoxä¸­æ˜ å°„ï¼š
```
/ğŸ¬æˆ‘çš„ç”µå½±/ -> /æˆ‘çš„ç™¾åº¦ç½‘ç›˜/ç”µå½±/
/ğŸ“ºæˆ‘çš„å‰§é›†/ -> /æˆ‘çš„ç™¾åº¦ç½‘ç›˜/ç”µè§†å‰§/
/ğŸ“–çºªå½•ç‰‡/ -> /æˆ‘çš„ç™¾åº¦ç½‘ç›˜/çºªå½•ç‰‡/
```

### 4. å®šæœŸç»´æŠ¤

å»ºè®®å®šæœŸæ‰§è¡Œï¼š

1. **æ£€æŸ¥cookieæœ‰æ•ˆæ€§**ï¼ˆæ¯å‘¨ï¼‰
   ```bash
   curl -H "Cookie: BDUSS=xxx; STOKEN=xxx" \
        "https://pan.baidu.com/api/quota"
   ```

2. **æ¸…ç†è¿‡æœŸåˆ†äº«**ï¼ˆæ¯æœˆï¼‰
   - è¿›å…¥åˆ†äº«ç®¡ç†
   - æµ‹è¯•æ‰€æœ‰åˆ†äº«é“¾æ¥
   - åˆ é™¤å¤±æ•ˆçš„åˆ†äº«

3. **æ›´æ–°refresh_token**ï¼ˆæŒ‰éœ€ï¼‰
   - å¦‚æœè‡ªåŠ¨åˆ·æ–°å¤±è´¥
   - é‡æ–°è·å–å¹¶æ›´æ–°

4. **å¤‡ä»½é…ç½®**ï¼ˆæ¯æœˆï¼‰
   ```bash
   # å¯¼å‡ºé…ç½®
   curl "http://your-server:4567/api/shares/export?type=10" > baidu_shares_backup.txt
   ```

---

## æ•…éšœæ’æŸ¥æ¸…å•

é‡åˆ°é—®é¢˜æ—¶æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š

### Step 1: æ£€æŸ¥åŸºç¡€æœåŠ¡

```bash
# 1. AList-TvBoxæœåŠ¡çŠ¶æ€
curl http://localhost:4567/health

# 2. AListæœåŠ¡çŠ¶æ€
curl http://localhost:5244/ping

# 3. ç½‘ç»œè¿æ¥
ping pan.baidu.com
```

### Step 2: æ£€æŸ¥é…ç½®

```bash
# 1. æŸ¥çœ‹è´¦æˆ·é…ç½®
curl "http://localhost:4567/api/driver-accounts" | jq

# 2. æŸ¥çœ‹åˆ†äº«é…ç½®
curl "http://localhost:4567/api/shares?type=10" | jq

# 3. æµ‹è¯•AListå­˜å‚¨
curl "http://localhost:5244/api/fs/list" \
  -H "Content-Type: application/json" \
  -d '{"path":"/æˆ‘çš„ç™¾åº¦ç½‘ç›˜"}'
```

### Step 3: æŸ¥çœ‹æ—¥å¿—

```bash
# 1. AList-TvBoxæ—¥å¿—
tail -100 /var/log/alist-tvbox.log | grep -i baidu

# 2. AListæ—¥å¿—
tail -100 /var/log/alist.log | grep -i baidu

# 3. ç³»ç»Ÿæ—¥å¿—
journalctl -u alist-tvbox -n 100
```

### Step 4: æµ‹è¯•æ’­æ”¾

```bash
# 1. è·å–æ’­æ”¾åœ°å€
curl "http://localhost:4567/api/play?site=1&path=/æˆ‘çš„ç™¾åº¦ç½‘ç›˜/test.mp4" | jq

# 2. æµ‹è¯•URLå¯è®¿é—®æ€§
# ä½¿ç”¨è¿”å›çš„URLæµ‹è¯•
curl -I -H "User-Agent: netdisk" "è¿”å›çš„æ’­æ”¾URL"
```

---

## é™„å½•

### A. Cookieæœ‰æ•ˆæœŸ

ç™¾åº¦ç½‘ç›˜Cookieçš„æœ‰æ•ˆæœŸï¼š
- BDUSS: é€šå¸¸30å¤©
- STOKEN: é€šå¸¸30å¤©
- å»ºè®®é…ç½®refresh_tokenè‡ªåŠ¨åˆ·æ–°

### B. APIé™æµè¯´æ˜

ç™¾åº¦ç½‘ç›˜APIé™æµè§„åˆ™ï¼š
- æ™®é€šç”¨æˆ·: çº¦100æ¬¡/å°æ—¶
- VIPç”¨æˆ·: çº¦500æ¬¡/å°æ—¶
- è¶…å‡ºé™æµä¼šè¿”å›429é”™è¯¯

### C. æ”¯æŒçš„è§†é¢‘æ ¼å¼

AList-TvBoxæ”¯æŒçš„è§†é¢‘æ ¼å¼ï¼š
- mp4, mkv, avi, mov
- flv, wmv, rmvb, rm
- ts, m3u8
- å…¶ä»–å¸¸è§è§†é¢‘æ ¼å¼

### D. ç›¸å…³é“¾æ¥

- [AListå®˜æ–¹æ–‡æ¡£](https://alist.nn.ci/)
- [AList-TvBoxé¡¹ç›®](https://github.com/your-repo)
- [ç™¾åº¦å¼€æ”¾å¹³å°](https://openapi.baidu.com/)
- [TvBoxä½¿ç”¨æŒ‡å—](https://github.com/tvbox)

---

## æ€»ç»“

é€šè¿‡æœ¬æŒ‡å—ï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

âœ… è·å–ç™¾åº¦ç½‘ç›˜æ‰€éœ€çš„cookieå’Œtoken  
âœ… æ­£ç¡®é…ç½®ç™¾åº¦ç½‘ç›˜è´¦æˆ·å’Œåˆ†äº«  
âœ… æµ‹è¯•å’ŒéªŒè¯é…ç½®æ˜¯å¦æ­£å¸¸  
âœ… è§£å†³å¸¸è§é—®é¢˜  
âœ… è¿›è¡Œé«˜çº§é…ç½®å’Œä¼˜åŒ–  

å¦‚æœé‡åˆ°æœ¬æŒ‡å—æœªè¦†ç›–çš„é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. å‚è€ƒAListå®˜æ–¹æ–‡æ¡£
3. åœ¨é¡¹ç›®Issuesä¸­æœç´¢ç±»ä¼¼é—®é¢˜
4. æäº¤æ–°çš„Issueå¹¶é™„ä¸Šè¯¦ç»†æ—¥å¿—

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
